customElements.define("lite-youtube",class e extends HTMLElement{connectedCallback(){this.videoId=encodeURIComponent(this.getAttribute("videoid"));const t=this.getAttribute("playlabel");this.playLabel=t?encodeURIComponent(t):"Play";const n=this.getAttribute("posterimage"),o=this.style.backgroundImage;this.posterUrl=n||(""!==o?e.getBackgroundImage(o):`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`),e.addPrefetch("preload",this.posterUrl,"image"),this.style.backgroundImage=`url("${this.posterUrl}")`;let c=this.querySelector(".lty-playbtn");c||(c=document.createElement("button"),c.type="button",c.classList.add("lty-playbtn"),c.title=decodeURIComponent(this.playLabel),this.append(c)),this.addEventListener("pointerover",e.warmConnections,{once:!0}),this.addEventListener("click",e=>this.addIframe())}static addPrefetch(e,t,n){const o=document.createElement("link");o.rel=e,o.href=t,n&&(o.as=n),document.head.append(o)}static warmConnections(){e.preconnected||(e.addPrefetch("preconnect","https://www.youtube-nocookie.com"),e.addPrefetch("preconnect","https://www.google.com"),e.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),e.addPrefetch("preconnect","https://static.doubleclick.net"),e.preconnected=!0)}static getBackgroundImage(e){console.log("getting url",e);const[t]=e.match(/url(("|')?.*("|'))\)/g),n=t.indexOf('"')>0;return t.slice(n?t.indexOf('"')+1:t.indexOf("'")+1,-2)}addIframe(){const e=new URLSearchParams(this.getAttribute("params")||[]);e.append("autoplay","1");const t=`\n<iframe width="560" height="315" frameborder="0"\n  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen\n  src="https://www.youtube-nocookie.com/embed/${this.videoId}?${e.toString()}"\n></iframe>`;this.insertAdjacentHTML("beforeend",t),this.classList.add("lyt-activated")}});
//# sourceMappingURL=lite-yt-embed.modern.js.map
